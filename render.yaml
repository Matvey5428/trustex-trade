# Render.com Blueprint Configuration
# https://render.com/docs/blueprint-spec

services:
  # Web Service - API сервер + Telegram бот
  - type: web
    name: trustex-bot
    runtime: node
    region: frankfurt  # Ближайший к России регион
    plan: free         # Бесплатный план
    
    # Build настройки
    buildCommand: npm install
    startCommand: npm start
    
    # Environment variables (настрой в Render Dashboard)
    envVars:
      - key: NODE_ENV
        value: production
      - key: PORT
        value: 10000
      - key: TELEGRAM_BOT_TOKEN
        sync: false  # Нужно ввести вручную в Dashboard
      - key: BOT_USERNAME
        sync: false
      - key: WEB_APP_URL
        sync: false  # Будет URL от Render после деплоя
      - key: API_BASE_URL
        sync: false

    # Health check
    healthCheckPath: /api/
    
    # Auto-deploy при push в main
    autoDeploy: true
